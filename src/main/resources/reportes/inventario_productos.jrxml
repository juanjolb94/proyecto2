<?xml version="1.0" encoding="UTF-8"?>
<jasperReport xmlns="http://jasperreports.sourceforge.net/jasperreports" 
              xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
              xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports 
              http://jasperreports.sourceforge.net/xsd/jasperreport.xsd" 
              name="inventario_productos" pageWidth="595" pageHeight="842" columnWidth="555">

    <!-- ========== PARÁMETROS ========== -->
    <parameter name="FECHA_GENERACION" class="java.lang.String"/>
    <parameter name="REPORT_TITLE" class="java.lang.String"/>
    
    <!-- ========== CAMPOS (Fields) ========== -->
    <field name="idProducto" class="java.lang.Integer"/>
    <field name="nombre" class="java.lang.String"/>
    <field name="categoria" class="java.lang.String"/>
    <field name="marca" class="java.lang.String"/>
    <field name="estado" class="java.lang.String"/>
    <field name="iva" class="java.lang.Double"/>

    <!-- ========== VARIABLES ========== -->
    <!-- Nota: REPORT_COUNT ya existe en JasperReports por defecto -->
    <!-- Usamos otra variable para contar productos -->
    <variable name="PRODUCTO_COUNT" class="java.lang.Integer" calculation="Count">
        <variableExpression><![CDATA[$F{idProducto}]]></variableExpression>
    </variable>

    <!-- ========== TÍTULO ========== -->
    <title>
        <band height="70">
            <staticText>
                <reportElement x="0" y="0" width="595" height="30"/>
                <textElement textAlignment="Center">
                    <font size="18" isBold="true"/>
                </textElement>
                <text><![CDATA[Reporte de Inventario de Productos]]></text>
            </staticText>
            <textField>
                <reportElement x="0" y="30" width="595" height="20"/>
                <textElement textAlignment="Center"/>
                <textFieldExpression><![CDATA["Generado el: " + $P{FECHA_GENERACION}]]></textFieldExpression>
            </textField>
        </band>
    </title>

    <!-- ========== ENCABEZADOS DE COLUMNA ========== -->
    <columnHeader>
        <band height="30">
            <staticText>
                <reportElement x="0" y="0" width="50" height="30" backcolor="#CCCCCC"/>
                <textElement textAlignment="Center" verticalAlignment="Middle">
                    <font isBold="true"/>
                </textElement>
                <text><![CDATA[ID]]></text>
            </staticText>
            <staticText>
                <reportElement x="50" y="0" width="200" height="30" backcolor="#CCCCCC"/>
                <textElement textAlignment="Center" verticalAlignment="Middle">
                    <font isBold="true"/>
                </textElement>
                <text><![CDATA[Nombre]]></text>
            </staticText>
            <staticText>
                <reportElement x="250" y="0" width="150" height="30" backcolor="#CCCCCC"/>
                <textElement textAlignment="Center" verticalAlignment="Middle">
                    <font isBold="true"/>
                </textElement>
                <text><![CDATA[Categoría]]></text>
            </staticText>
            <staticText>
                <reportElement x="400" y="0" width="80" height="30" backcolor="#CCCCCC"/>
                <textElement textAlignment="Center" verticalAlignment="Middle">
                    <font isBold="true"/>
                </textElement>
                <text><![CDATA[IVA %]]></text>
            </staticText>
            <staticText>
                <reportElement x="480" y="0" width="75" height="30" backcolor="#CCCCCC"/>
                <textElement textAlignment="Center" verticalAlignment="Middle">
                    <font isBold="true"/>
                </textElement>
                <text><![CDATA[Estado]]></text>
            </staticText>
        </band>
    </columnHeader>

    <!-- ========== DETALLE ========== -->
    <detail>
        <band height="25">
            <textField>
                <reportElement x="0" y="0" width="50" height="25"/>
                <textElement textAlignment="Center" verticalAlignment="Middle"/>
                <textFieldExpression><![CDATA[$F{idProducto}]]></textFieldExpression>
            </textField>
            <textField>
                <reportElement x="50" y="0" width="200" height="25"/>
                <textElement verticalAlignment="Middle"/>
                <textFieldExpression><![CDATA[$F{nombre}]]></textFieldExpression>
            </textField>
            <textField>
                <reportElement x="250" y="0" width="150" height="25"/>
                <textElement verticalAlignment="Middle"/>
                <textFieldExpression><![CDATA[$F{categoria}]]></textFieldExpression>
            </textField>
            <textField>
                <reportElement x="400" y="0" width="80" height="25"/>
                <textElement textAlignment="Center" verticalAlignment="Middle"/>
                <textFieldExpression><![CDATA[$F{iva}]]></textFieldExpression>
            </textField>
            <textField>
                <reportElement x="480" y="0" width="75" height="25"/>
                <textElement textAlignment="Center" verticalAlignment="Middle"/>
                <textFieldExpression><![CDATA[$F{estado}]]></textFieldExpression>
            </textField>
        </band>
    </detail>

    <!-- ========== COLUMN FOOTER (si es necesario) ========== -->
    <columnFooter>
        <band height="0"/>
    </columnFooter>

    <!-- ========== PAGE FOOTER (Debe ir antes de summary según el esquema) ========== -->
    <pageFooter>
        <band height="20">
            <textField>
                <reportElement x="0" y="0" width="555" height="20"/>
                <textElement textAlignment="Right"/>
                <textFieldExpression><![CDATA["Página " + $V{PAGE_NUMBER} + " de " + $V{PAGE_COUNT}]]></textFieldExpression>
            </textField>
        </band>
    </pageFooter>

    <!-- ========== LAST PAGE FOOTER (opcional) ========== -->
    <lastPageFooter>
        <band height="0"/>
    </lastPageFooter>

    <!-- ========== RESUMEN ========== -->
    <summary>
        <band height="30">
            <staticText>
                <reportElement x="0" y="0" width="400" height="30"/>
                <textElement textAlignment="Right" verticalAlignment="Middle">
                    <font isBold="true"/>
                </textElement>
                <text><![CDATA[Total de productos:]]></text>
            </staticText>
            <textField>
                <reportElement x="400" y="0" width="100" height="30"/>
                <textElement textAlignment="Center" verticalAlignment="Middle">
                    <font isBold="true"/>
                </textElement>
                <textFieldExpression><![CDATA[$V{REPORT_COUNT}]]></textFieldExpression>
            </textField>
        </band>
    </summary>

    <!-- ========== NO DATA (opcional) ========== -->
    <noData>
        <band height="50">
            <staticText>
                <reportElement x="0" y="0" width="555" height="50"/>
                <textElement textAlignment="Center" verticalAlignment="Middle">
                    <font size="14" isBold="true"/>
                </textElement>
                <text><![CDATA[No hay datos disponibles para mostrar en este reporte.]]></text>
            </staticText>
        </band>
    </noData>
</jasperReport>